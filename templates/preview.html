{% extends "base.html" %}
{% block title %}PrÃ©via dos Arquivos{% endblock %}

{% block content %}
<div class="container mt-4">
    <h3>ğŸ“„ PrÃ©via dos Arquivos Gerados</h3>

    <a href="{{ url_for('geralayout.download_all') }}" class="btn btn-primary mt-3">â¬‡ï¸ Baixar Todos em ZIP</a>
    <a href="{{ url_for('geralayout.index') }}" class="btn btn-secondary mt-3 ms-2">ğŸ”™ Voltar</a>

    {% for arquivo in arquivos %}
      <h5 class="mt-4">{{ arquivo.filename }}</h5>
      <textarea id="txt-{{ loop.geralayout }}" class="form-control mb-2" rows="10" readonly>{{ arquivo.conteudo }}</textarea>
      <button class="btn btn-success mb-3" onclick="copiarArquivo('txt-{{ loop.geralayout }}')">ğŸ“‹ Copiar Arquivo</button>
      <a href="{{ url_for('geralayout.download_file', filename=arquivo.filename) }}" class="btn btn-info mb-3 ms-2">â¬‡ï¸ Baixar Arquivo</a>
    {% endfor %}
</div>

<script>
function copiarArquivo(id) {
    const textarea = document.getElementById(id);
    textarea.select();
    textarea.setSelectionRange(0, 99999); // Para dispositivos mÃ³veis
    document.execCommand('copy');
    alert('ConteÃºdo copiado para a Ã¡rea de transferÃªncia!');
}
</script>
{% endblock %}
